<div class="datatable-selection">
  <app-datatable-scroller
    (scroll)="onBodyScroll($event)">
    <div class="datatable-row-wrapper"
         *ngFor="let row of table.rows; let rowIndex=index; trackBy: rowTrackingFn">

      <div class="datatable-body-row datatable-group-header"
           *ngIf="table.isRowGroup(row, rowIndex)">
        <div class="datatable-row-left datatable-row-group" [style.left.px]="offsetX">
          <div style="background-color: #f5f5f5">
            <b>{{table.getRowGroupName(row)}}</b> ({{table.getRowGroupSize(row)}})
          </div>
        </div>
        <div class="datatable-row-center datatable-row-group"></div>
      </div>

      <app-datatable-body-row
        [table]="table"
        [row]="row"
        [rowIndex]="rowIndex"
        [offsetX]="offsetX">
      </app-datatable-body-row>
    </div>
  </app-datatable-scroller>
  <div class="empty-row"
       *ngIf="!table.rows?.length"
       [style.width.px]="table.columnsTotalWidth">
    <ng-container *ngIf="loading">{{table.settings.messages.loading}}</ng-container>
    <ng-container *ngIf="!loading">{{table.settings.messages.empty}}</ng-container>
  </div>
</div>
